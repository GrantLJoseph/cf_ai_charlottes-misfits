<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Card Game</title>
	<link rel="stylesheet" href="index.css">
</head>
<body>
	<div id="game-container"></div>
	<script src="index.js"></script>
	<div id="bottom-bar">
		<a href="/logout" class="bar-icon" title="Logout">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
				<polyline points="16 17 21 12 16 7"></polyline>
				<line x1="21" y1="12" x2="9" y2="12"></line>
			</svg>
		</a>
		<button id="reset-game" class="bar-icon" title="Reset Game">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
				<path d="M3 3v5h5"></path>
			</svg>
		</button>
		<div class="bar-spacer"></div>
		<button id="rules-toggle" class="bar-icon" title="Rules">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<circle cx="12" cy="12" r="10"></circle>
				<path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
				<line x1="12" y1="17" x2="12.01" y2="17"></line>
			</svg>
		</button>
		<button id="chat-toggle" class="bar-icon" title="Chat">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
			</svg>
			<span id="chat-notification" class="notification-dot"></span>
		</button>
	</div>

	<div id="chat-popup" class="chat-hidden">
		<div id="chat-header">
			<span>AI Chat & Game Log</span>
			<button id="chat-close" title="Close">√ó</button>
		</div>
		<div id="chat-messages"></div>
		<div id="chat-input-area">
			<input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off">
			<button id="chat-send" title="Send">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="22" y1="2" x2="11" y2="13"></line>
					<polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
				</svg>
			</button>
		</div>
	</div>

	<div id="rules-backdrop"></div>
	<div id="rules-popup" class="rules-hidden">
		<div id="rules-header">
			<span>Charlotte's Misfits - Rules</span>
			<button id="rules-close" title="Close">√ó</button>
		</div>
		<div id="rules-content">
			<section>
				<h2>Overview</h2>
				<p>Charlotte's Misfits is a strategic card game where the goal is to be the first player to get rid of all your cards. Players take turns placing cards on a central stack, following specific rules about card ranks and combinations.</p>
			</section>

			<section>
				<h2>Setup</h2>
				<ol>
					<li>Each player draws <strong>9 cards</strong> face down into their hand.</li>
					<li>Without looking, each player selects <strong>3 cards</strong> to place face down as their <strong>Hidden Reserve</strong>.</li>
					<li>Players then look at their remaining 6 cards and create <strong>3 placements</strong> for their <strong>Visible Reserve</strong>.</li>
					<li>After setup, players draw back up to 3 cards in hand.</li>
				</ol>
				<div class="rules-diagram">
					<div class="diagram-layout horizontal">
						<div class="diagram-section">
							<div class="diagram-label">Opponent</div>
							<div class="diagram-row">
								<div class="card-placeholder small">Visible</div>
								<div class="card-placeholder small">Visible</div>
								<div class="card-placeholder small">Visible</div>
							</div>
						</div>
						<div class="diagram-center">
							<div class="card-placeholder">Stack</div>
							<div class="card-placeholder deck">Deck</div>
						</div>
						<div class="diagram-section">
							<div class="diagram-row">
								<div class="card-placeholder small">Visible</div>
								<div class="card-placeholder small">Visible</div>
								<div class="card-placeholder small">Visible</div>
							</div>
							<div class="diagram-label">You</div>
						</div>
					</div>
				</div>
			</section>

			<section>
				<h2>Valid Placements</h2>
				<p>A placement can be one of the following:</p>
				<ul>
					<li><strong>Single card</strong> - Any one card</li>
					<li><strong>Multiple of a kind</strong> - Two or more cards of the same rank (e.g., three 7s)</li>
					<li><strong>Straight</strong> - Three or more consecutive cards (e.g., 5-6-7)</li>
				</ul>
				<div class="rules-examples">
					<div class="example valid">
						<div class="example-cards">
							<span class="mini-card">7‚ô†</span>
							<span class="mini-card">7‚ô•</span>
							<span class="mini-card">7‚ô¶</span>
						</div>
						<span class="example-label">‚úì Valid - Three of a kind</span>
					</div>
					<div class="example valid">
						<div class="example-cards">
							<span class="mini-card">9‚ô£</span>
							<span class="mini-card">10‚ô•</span>
							<span class="mini-card">J‚ô†</span>
						</div>
						<span class="example-label">‚úì Valid - Straight</span>
					</div>
					<div class="example invalid">
						<div class="example-cards">
							<span class="mini-card">5‚ô†</span>
							<span class="mini-card">7‚ô•</span>
						</div>
						<span class="example-label">‚úó Invalid - Not consecutive or same rank</span>
					</div>
				</div>
			</section>

			<section>
				<h2>Playing on the Stack</h2>
				<p>On your turn, you must play a valid placement onto the stack. The <strong>lowest card</strong> of your placement must be <strong>equal to or higher</strong> than the top card of the stack.</p>
				<div class="rules-examples">
					<div class="example">
						<div class="example-scenario">
							<span>Stack top: <span class="mini-card">8‚ô•</span></span>
							<span>You play: <span class="mini-card">10‚ô†</span><span class="mini-card">10‚ô¶</span></span>
						</div>
						<span class="example-label">‚úì Valid - 10 ‚â• 8</span>
					</div>
					<div class="example">
						<div class="example-scenario">
							<span>Stack top: <span class="mini-card">J‚ô£</span></span>
							<span>You play: <span class="mini-card">9‚ô†</span><span class="mini-card">10‚ô•</span><span class="mini-card">J‚ô¶</span></span>
						</div>
						<span class="example-label">‚úó Invalid - Lowest card (9) < Jack</span>
					</div>
				</div>
			</section>

			<section>
				<h2>Special Cards</h2>
				<div class="special-cards">
					<div class="special-card">
						<div class="special-card-display">2</div>
						<div class="special-card-info">
							<h3>Twos - Wild Card</h3>
							<p>A 2 can <strong>always be played</strong>, regardless of the stack's top card. Straights starting with 2 can also always be played.</p>
						</div>
					</div>
					<div class="special-card">
						<div class="special-card-display">A</div>
						<div class="special-card-info">
							<h3>Aces - Stack Burner</h3>
							<p>Aces can always be played (they're the highest). When played, the <strong>entire stack is discarded</strong> from the game, and you <strong>get another turn</strong>.</p>
						</div>
					</div>
				</div>
			</section>

			<section>
				<h2>Taking the Stack</h2>
				<p>If you cannot make a valid play, you must <strong>pick up the entire stack</strong> into your hand. Your turn then ends.</p>
			</section>

			<section>
				<h2>Hand Management</h2>
				<ul>
					<li>You must always have <strong>at least 3 cards</strong> in your hand (if possible).</li>
					<li>After playing, <strong>draw from the deck</strong> until you have 3 cards.</li>
					<li>When the deck is empty, you cannot draw anymore.</li>
					<li>When your hand is empty, your <strong>Visible Reserve</strong> becomes your hand.</li>
					<li>When both hand and Visible Reserve are empty, you play from your <strong>Hidden Reserve</strong> (one card at a time, revealed when played).</li>
				</ul>
			</section>

			<section>
				<h2>Winning</h2>
				<p>The first player to <strong>get rid of all their cards</strong> (hand, Visible Reserve, and Hidden Reserve) wins the game!</p>
			</section>

			<section>
				<h2>Strategy Tips</h2>
				<ul>
					<li>üéØ <strong>Play low cards early</strong> - They're harder to get rid of later.</li>
					<li>üÉè <strong>Save 2s for emergencies</strong> - They can get you out of tough spots.</li>
					<li>üî• <strong>Time your Aces</strong> - Use them when the stack is large to remove more cards from play.</li>
					<li>üìä <strong>Watch your opponent</strong> - If they have few cards, try to spike them with high cards.</li>
					<li>üé≤ <strong>Hidden Reserve is risky</strong> - You can't see what you'll draw, so the game can turn quickly at the end.</li>
				</ul>
			</section>
		</div>
	</div>
</body>
</html>
